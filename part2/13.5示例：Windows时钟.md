# 13.5示例：Windows时钟

Harry Robinsson是基于模型测试的领先专家之一。他的目标是通过创建正在测试的对象的正式模型来自动化测试这种更正式的、基于模型的测试的好处是，它可以适应经常发生的快速更改。因此，我们也避免了所谓的农药悖论，它涉及到系统对我们的测试用例产生抗性，这意味着我们不再发现任何新的缺陷。我们也在早期参与其中，并且能够发现设计中的缺陷。因为我们正在使用自动化，所以我们可以运行大量的测试用例来测试健壮性。

例如:旧版本Windows中的时钟
这是应用程序clock.exe的部分模型，在MS Windows的早期版本中存在，但在Windows XP中没有

通过双击file clock.exe或从菜单中选择时钟来启动时钟。
它可以显示在模拟或数字形式-改变发生通过选择从设置菜单。
它也可以最小化和恢复通过使用窗口中的图标。
![](https://tva1.sinaimg.cn/large/008i3skNgy1gykjlnhoaej30p20aymxr.jpg)
图13.9:Clock.exe有或没有框架和菜单。这是两种不同的状态。资料来源:Harry Robinsson(2005):欧洲之星介绍。

下图显示了完整模型的各个部分。因为About只是一个信息窗口，所以我选择将它描述为一种状态，不管你来自哪里。剩下的是以下内容

1. 函数Maximise生成了上面模型的一个并行图像，它与模型放在一起。因此，模型的总尺寸是原来的两倍。

2. 变量GMT，秒和日期，选择所有看到或不看到，以及详细信息。我们应该能够为所有这些参数创建新的状态，但问题是模型增长非常快——如果我们选择所有这些参数作为不同的状态，模型的大小将为每个参数增加一倍。另一种方法是在每个状态中将这些部分定义为参数。

![](https://tva1.sinaimg.cn/large/008i3skNgy1gykjmx1avpj314k0u07af.jpg)
图13.10:时钟的部分状态图。函数Maximise生成了上面模型的一个并行图像，它与模型放在一起。因此，模型的总尺寸是原来的两倍。

由上面得到的测试数据如下
![](https://tva1.sinaimg.cn/large/008i3skNgy1gykjnzj3e0j30ds0gedgn.jpg)
图13.11:时钟的测试数据表。在这种情况下，测试数据非常简单。

测试用例示例:
测试用例1:启动模拟时钟，最大化，关闭，启动，最小化，启动，零位(?)秒表等这里只测试流:我们还不关心数据。时钟随着每一个序列而缩小。
![](https://tva1.sinaimg.cn/large/008i3skNgy1gykjoymaugj30x00hugns.jpg)
图13.12:收缩的时钟。重复序列的影响。71年。资料来源:Harry Robinsson(2005):欧洲之星介绍。

测试用例2:我们还处理数据:序列start- minimize -stop-start- zero-date:结果:年份消失
![](https://tva1.sinaimg.cn/large/008i3skNgy1gykjpphyrjj30vs0fo75r.jpg)
图13.13:消失的一年。失去的一年设定，发生在一定的过渡序列之后。72年。资料来源:Harry Robinsson(2005):欧洲之星介绍。